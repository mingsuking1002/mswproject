## 1. 기획 의도 (왜 필요한가?)

- **전략적 생존:** 체력과 탄창을 공유하지 않고 개별 관리하게 함으로써, 위급 상황(HP/탄환 고갈) 시 교체를 통해 전투 지속력을 높임.
    
- **액션 연계:** 교체 시 단순 등장이 아니라 '태그 스킬'을 자동 발동시켜, 콤보 액션의 재미를 부여함.
    

## 2. 유저 플로우 (플레이어가 뭘 하는가?)

1. **[상황 인지]** 플레이어가 현재 캐릭터의 HP가 낮거나 탄창이 비었음을 확인한다.
    
2. **[교체 입력]** 태그 버튼(Key)을 입력한다.
    
3. **[조건 체크]**
    
    - 태그 쿨타임이 끝났는가? (True)
        
    - 현재 태그 금지 구역(상점, 컷신 등)이 아닌가? (True)
        
    - 상태 이상(기절 등)이 아닌가? (True)
        
4. **[교체 실행 (Switching)]**
    
    - **퇴장:** 현재 캐릭터(A)가 즉시 화면에서 사라짐. (위치/각도 저장)
        
    - **등장:** 대기 캐릭터(B)가 저장된 위치/각도에 소환됨.
        
    - **무적:** 교체 프레임 동안 일시적 무적 판정(Invincibility) 적용.
        
5. **[액션 발동]** 등장한 캐릭터(B)가 즉시 고유의 **'태그 스킬(Entry Skill)'**을 시전한다.
    
6. **[데이터 갱신]** UI(체력바, 무기 슬롯)가 캐릭터 B의 정보로 즉시 교체된다.

	![[Pasted image 20260218025422.png]]
	![[Pasted image 20260218025434.png]]
## 3. 수치 / 데이터

|   |   |   |   |
|---|---|---|---|
|**구분**|**항목**|**값 (임시)**|**비고**|
|**기본 설정**|태그 쿨타임|3.0초|잦은 교체 방지 (밸런싱 필요)|
||교체 무적 시간|0.5초|교체 직후 피격 방지용 안전장치|
|**개별 데이터**|캐릭터 A 체력/탄창|개별 관리|대기 중 회복/재장전 없음 (상태 유지)|
||캐릭터 B 체력/탄창|개별 관리|상동|
|**공유/예외**|장전 쿨타임|**공유(진행)**|**중요:** 대기 중에도 장전 쿨타임 타이머는 흐름|
||위치/회전값|공유|교체 시 이전 캐릭터의 Transform 계승|
|**UI**|대기 캐릭터 HUD|표시 필요|대기 중인 캐릭터의 HP/쿨타임 상태 표시 필요|

## 4. 예외 상황 (~하면 어떻게 되나?)

- **현재 캐릭터가 사망(HP 0)하면?**
    
    - → 대기 캐릭터의 생존 여부와 관계없이 **즉시 게임 오버**. (자동 교체 없음)
        
- **재장전 중에 태그를 하면?**
    
    - → 재장전 모션은 캔슬되지만, **'장전 쿨타임'은 백그라운드에서 계속 흐름**.
        
    - → (다시 돌아왔을 때 쿨타임이 지났다면 즉시 사격 가능, 아니라면 남은 시간 대기)
        
- **상점이나 컷신(대화) 중에 태그 키를 누르면?**
    
    - → **입력 무시.** (UI 팝업이나 특정 구역 트리거로 태그 잠금 상태 활성화)
        
- **벽에 딱 붙어서 태그를 하면?**
    
    - → 좌표를 그대로 이어받으므로 끼임 현상 주의. (충돌체 크기가 다를 경우 위치 미세 보정 필요할 수 있음)
        

## 5. 연관 시스템

- **캐릭터 매니저:** 두 캐릭터의 데이터(HP, Ammo, Skill)를 독립된 객체로 관리하고 스왑하는 기능.
    
- **전투 시스템:** 등장 시 발동할 '태그 스킬(Entry Skill)' 호출 로직.
    
- **UI 매니저:** 메인 HUD의 초상화, 체력바, 스킬 아이콘을 캐릭터 ID에 맞춰 스왑.
    
- **입력 시스템:** 상태 이상(CC기) 및 금지 구역에서의 입력 차단 로직.
    

## 6. 레퍼런스 (선택)

- **젠레스 존 제로 (ZZZ) / 붕괴3rd:** 캐릭터 교체 시 등장 공격(QTE/지원 공격)이 발동하며 전투를 이어가는 흐름.
    
- **건파이어 리본 (Gunfire Reborn):** (비슷한 장르라면) 무기 스왑 시의 딜레이 처리 방식 참고.
    

## 7. 우선순위 (선택)

- [x] 🔴 최우선 (핵심 코어: 데이터 분리 및 스왑 구현)
    
- [ ] 🟡 중요 (태그 스킬 구현, 교체 무적 판정)
    
- [ ] 🟢 나중에 (대기 캐릭터 HP/탄약 UI 연출 강화)