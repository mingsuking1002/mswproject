
## 1. 기획 의도

- 개발자가 게임 내에서 캐릭터의 이동을 원활하게 구현하고 지정할 수 있도록 돕기 위함.
## 2. 개요

- **목표:** 플레이어가 키보드를 통해 캐릭터를 상, 하, 좌, 우 및 대각선을 포함한 **총 8방향**으로 자유롭게 이동시킬 수 있도록 한다.
    
- **시점:** 탑뷰 (Top-down View)

## 3. 입력 키 및 이동 방향

- **기준:** PC 키보드
    
- **기본 이동 (4방향):**
    
    - **상:** `W`
        
    - **하:** `S`
        
    - **좌:** `A`
        
    - **우:** `D`
        
- **대각선 이동 (조합 키):**
    
    - **좌상:** `A` + `W`
        
    - **우상:** `D` + `W`
        
    - **좌하:** `A` + `S`
        
    - **우하:** `D` + `S`
        
- **입력 우선순위 (예외 처리):**
    
    - 서로 반대되는 키 동시 입력 시 **'정지'**로 처리.
        
    - _Ex) `A` + `D` 동시 입력 = 정지 / `W` + `S` 동시 입력 = 정지_
    

## 4. 이동 속도 및 벡터 (정규화)

- **기본 속도:** `1` (단, 인게임 상황에 따라 변동 가능한 **변수**로 지정할 것)
    
    - _Note: 이동 속도 변화(버프/디버프 등)에 대비해 고정값이 아닌 **배율 조절**이 가능하도록 설계 필요._
        
- **방향별 벡터 값 (정규화 예시):**
    
    - 대각선 이동 시 속도가 빨라지는 현상(과거 버니합 등)을 방지하기 위해 벡터 정규화 필수.
    

|   |   |   |   |   |
|---|---|---|---|---|
|**방향**|**키 조합**|**X 값**|**Y 값**|**비고**|
|**상**|W|0|1||
|**하**|S|0|-1||
|**좌**|A|-1|0||
|**우**|D|1|0||
|**좌상**|A + W|-0.7071|0.7071|√2/2|
|**우상**|D + W|0.7071|0.7071|√2/2|
|**좌하**|A + S|-0.7071|-0.7071|√2/2|
|**우하**|D + S|0.7071|-0.7071|√2/2|

## 5. 구현 방식 (스프라이트)

- **리소스 요구사항:** 8방향 각각에 대한 스프라이트 필요.
    
- **리소스 부재 시 대체 순서:**
    
    1. 8방향 스프라이트 (최우선)
    
- **전환 로직:** 이동 방향 전환 시 **즉시 스프라이트 전환** (이미지 전환 간 별도 감속/블렌딩 없음).

## 6. 충돌 처리

- **슬라이드 벡터 (Slide Vector):**
    
    - 벽이나 장애물과 충돌 시, 캐릭터가 멈추지 않고 벽을 타고 **미끄러지듯 이동**하도록 처리.
        
    - _Ex) 위쪽 벽에 부딪힌 상태에서 '우상(D+W)' 키 입력 시 → 위(Y축)로는 이동 불가하지만, 오른쪽(X축)으로는 계속 이동함._
    

## 7. 플레이어 시점 (카메라)

- **기본 원칙:** 카메라는 항상 **캐릭터를 화면 정중앙**에 위치시킴.
    
- **경계 처리:**
    
    - 맵의 끝까지 이동했을 때, **맵 밖의 영역(Void)이 화면에 잡히지 않도록** 처리.
        
    - 캐릭터가 맵 끝에 도달하면 카메라는 더 이상 캐릭터를 따라가며 추가로 이동하지 않음 (카메라 고정).
    

## 8. 예외 처리 (조작 불가 상황)

다음 상황에서는 이동 조작 키 입력을 비활성화하거나 제한한다.

1. **공격 중:**
    
    - 이동 가능.
        
    - 단, 무기의 종류나 효과에 따라 **이동 속도 변경(감속 등)** 가능.
        
2. **상점 이용 중:** 조작 키 비활성화.
    
3. **UI 팝업 활성화 시:**
    
    - 무기 교체, 패시브/퍽 선택 등 모든 팝업 창이 열려 있을 때 조작 키 비활성화.
        
4. **캐릭터 상태 이상:**
    
    - 캐릭터 사망 시.
        
    - 보스 패턴 등에 의한 CC기(군중 제어기) 피격 시 비활성화.