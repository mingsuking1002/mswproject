# [PC 8방향 캐릭터 이동 및 카메라 시스템]

## 1. 기획 의도 (왜 필요한가?)

- 탑뷰(Top-down) 시점에서 플레이어가 캐릭터를 직관적이고 부드럽게 조작할 수 있도록 함.
    
- 대각선 이동 시 속도가 빨라지는 현상을 막고, 벽에 부딪혀도 조작감이 끊기지 않게 하여 쾌적한 플레이 경험 제공.
## 2. 유저 플로우 (플레이어가 뭘 하는가?)

1. **[입력]** 플레이어가 `W`, `A`, `S`, `D` 키를 단독 혹은 조합하여 누릅니다.
    
2. **[반응 - 이동]** 캐릭터가 입력된 방향(8방향)으로 즉시 이동합니다.
    
    - 대각선 입력 시에도 수직/수평 이동과 동일한 속도로 이동합니다 (정규화 적용).
        
    - 벽이나 장애물에 부딪히면 멈추지 않고 벽을 타고 미끄러지듯 이동합니다 (Slide).
        
3. **[반응 - 시각]** 이동 방향에 맞춰 캐릭터의 스프라이트(이미지)가 즉시 해당 방향을 바라봅니다. (별도 회전 애니메이션 없음)
    
4. **[반응 - 카메라]** 카메라는 캐릭터를 항상 화면 정중앙에 두고 따라다닙니다.
    
    - 단, 캐릭터가 맵 끝에 도달하면 카메라는 더 이상 이동하지 않고 멈춥니다 (맵 밖의 Void 영역 노출 방지).
## 3. 수치 / 데이터

|                |               |                                      |
| -------------- | ------------- | ------------------------------------ |
| **항목**         | **값**         | **비고**                               |
| **기본 이동 속도**   | **1.0** (기준값) | 인게임 버프/디버프에 따라 배율 적용 가능하도록 설계 필요     |
| **대각선 벡터 보정값** | **±0.7071**   | X, Y축 이동량 (√2/2), 대각선 이동 시 속도 뻥튀기 방지 |
| **방향 스프라이트 수** | **8개**        | 상, 하, 좌, 우, 좌상, 우상, 좌하, 우하           |
| **공격 중 이동 속도** | **미정**        | 무기별로 감속 비율 다를 수 있음 (기본 1.0 유지)       |
| **카메라 고정 오프셋** | **(0, 0)**    | 캐릭터 정중앙 기준                           |

> 💡 이동 속도는 추후 아이템이나 스킬에 의해 `%` 단위로 증감될 수 있으니 **변수(Float)**로 관리해주세요.

## 4. 예외 상황 (~하면 어떻게 되나?)

- **[반대 키 동시 입력]** `W`+`S` 혹은 `A`+`D`를 동시에 누르면? → **즉시 정지** (이동 값 0).
    
- **[조작 불가 상태]** 상점 이용, UI 팝업 열림, 사망, CC기 피격 시? → **입력 무시 & 제자리 정지**.
    
- **[공격 중 이동]** 공격 모션 중에 이동 키를 누르면? → **이동 가능** (단, 기획 데이터에 따라 속도가 느려질 수 있음).
    
- **[창 비활성화]** 게임 창을 내리거나(Alt+Tab) 포커스를 잃으면? → **즉시 정지** (눌려있던 키 입력 해제 처리).
    
- **[맵 경계 이동]** 맵의 모서리(구석)로 계속 이동하면? → 캐릭터는 벽에 붙고, 카메라는 맵 끝에 고정되어 더 이상 따라가지 않음.
## 5. 연관 시스템

- **입력 시스템 (Input System):** 키보드 입력 감지 및 우선순위 처리.
    
- **애니메이션 시스템:** 이동 방향에 따른 스프라이트 교체.
    
- **맵/물리 시스템:** 벽 충돌 감지 및 슬라이드 처리, 카메라 이동 제한 구역(Bounds).
    
- **상태 이상 시스템:** CC기(스턴, 속박 등) 적용 시 이동 입력 차단.
## 6. 레퍼런스 (선택)

- **엔터 더 건전 (Enter the Gungeon):** 탑뷰 시점의 8방향 이동 및 벽 미끄러짐 처리 참고.
    
- **스타듀 밸리 (Stardew Valley):** 대각선 이동 시 속도 보정 느낌 참고.
## 7. 우선순위 (선택)

- [x] 🔴 최우선 (없으면 게임 안 됨)
    
- [ ] 🟡 중요 (있으면 훨씬 나음)
    
- [ ] 🟢 나중에 (여유 되면)