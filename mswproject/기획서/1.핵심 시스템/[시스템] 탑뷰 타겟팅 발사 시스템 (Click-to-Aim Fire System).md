## 1. 기획 의도 (왜 필요한가?)

- **이동 집중:** 캐릭터가 마우스를 항상 바라보는 방식(실시간 회전)이 주는 어지러움과 조작 피로도를 제거하고, 회전을 줄여 이동 자체에 집중하게 함.
    
- **타격감 강화:** 플레이어가 공격 버튼(좌클릭)을 누른 "그 순간"의 좌표를 계산하여 발사함으로써, 정확한 에임 능력과 긴장감을 요구함.
## 2. 유저 플로우 (플레이어가 뭘 하는가?)

1. **[조준]** 플레이어가 마우스 커서를 목표 지점에 둔다. (이때 캐릭터는 마우스를 따라 회전하지 않음)
    
2. **[발사 입력]** 마우스 좌클릭(L-Click)을 입력한다.
    
    - _시스템:_ 클릭한 순간의 마우스 스크린 좌표를 **게임 내 월드 좌표**로 변환한다.
    
3. **[발사 조건 체크]**
    
    - 상태 이상(스턴, 사망), 상점 이용 중, 재장전 중이 아닌가? (True)
        
    - 잔탄이 0보다 큰가? (True)
        
    - 현재 쿨타임이 0인가? (True)
        
4. **[실행 (Action)]**
    
    - **회전:** 캐릭터가 변환된 월드 좌표 방향으로 **즉시 회전**한다.
        
    - **생성:** 무기 끝부분(Muzzle) 좌표에서 투사체를 생성한다.
        
    - **가속:** 투사체에 발사 방향으로 속도(Velocity)를 부여한다.
        
    - **피드백:** "탕!" 하는 발사 사운드와 총구 화염 이펙트(Muzzle Flash)를 재생한다.
        
    - **데이터:** 잔탄을 1 차감하고, 쿨타임을 무기 연사 속도로 초기화한다.
        
5. **[투사체 진행 및 소멸]**
    
    - **적중 시:** 적에게 데미지를 입히고 피격 이펙트 재생 후 소멸.
        
    - **지형 충돌 시:** 벽이나 장애물에 닿으면 소멸.
        
    - **자연 소멸:** 최대 사거리 도달 혹은 생존 시간(Lifetime) 초과 시 자동 소멸.
    
6. **[발사 조건 참조 이미지]**
	 ![[Pasted image 20260218024326.png]]
	 ![[Pasted image 20260218024409.png]]

## 3. 수치 / 데이터

|   |   |   |   |
|---|---|---|---|
|**구분**|**항목**|**값 (임시)**|**비고**|
|**기본 스펙**|발사 쿨타임 (연사 속도)|0.5초|낮을수록 빠름|
||투사체 속도|20.0||
||최대 사거리|15.0m||
||생존 시간 (Lifetime)|2.0초|사거리/속도로 계산 가능하나 안전장치로 필요|
||탄 퍼짐 (Spread)|0도|산탄총 등 특수 무기는 15~30도 랜덤|
|**판정/위치**|생성 위치 보정 (Offset)|(X:0.5, Y:0.2)|캐릭터 중심점이 아닌 **무기 끝**에서 생성 필수|
|**상태 변수**|공격 가능 상태|bool|스턴, 상점, 재장전, 사망 시 False|
||남은 잔탄량|int|0일 시 발사 불가|
|**데미지 변수**|무기 기본 공격력|10||
||캐릭터 패시브 추가공격력|5|(상시 적용값)|
||버프 증가 계수|10%|(일시적 버프)|
||캐릭터 패시브 계수|5%|(캐릭터 고유 계수)|

### 🧮 데미지 공식 명세

> **1. 플레이어가 몬스터를 공격할 때 (To Monster)**
> 
> **[캐릭터 A / B 공통 구조]**
> 
> `최종 데미지` = `(무기 기본 공격력 + 캐릭터 패시브 추가 공격력[상시])`
> 
> `* (100% + 버프 시 증가 퍼센트 계수% [고유/유일])`
> 
> `* (100% + 캐릭터 패시브 증가 퍼센트 계수%)`

> **2. 플레이어가 몬스터에게 맞았을 때 (From Monster)**
> 
> `입는 데미지` = `(몬스터 기본 공격력) - (피격 데미지 감소량)`
> 
> `최종 체력` = `(피격 전 HP) - (입는 데미지)`

## 4. 예외 상황 (~하면 어떻게 되나?)

- **잔탄이 부족할 때 (0발) 클릭하면?**
    
    - → "틱" 하는 빈 탄창 소리(Empty Click Sound) 재생.
        
    - → 화면 중앙(혹은 HUD)에 **"재장전 필요"** 안내 메시지 출력.
        
- **쿨타임 중에 다시 클릭하면?**
    
    - → 입력을 완전히 무시함 (아무 반응 없음).
        
- **투사체가 날아가는 도중 무기를 바꾸면?**
    
    - → 이미 발사된 투사체는 **발사된 시점(과거)**의 무기 데미지 데이터를 유지해야 함.
        
- **클릭 위치가 캐릭터 좌표와 겹칠 경우?**
    
    - → 회전하지 않고 현재 바라보는 방향 유지 (혹은 Default 방향)로 발사.
    

## 5. 연관 시스템

- **HUD (UI):** 잔탄 게이지 실시간 갱신, 재장전 알림 메시지 표시.
    
- **사운드 시스템:**
    
    - 발사음 (무기별 고유)
        
    - 빈 탄창 소리 (Dry Fire)
        
    - 피격음 (적/벽 충돌 시)
        
- **이펙트 시스템 (VFX):**
    
    - 발사 시: 총구 화염 (Muzzle Flash) - 짧게 재생
        
    - 충돌 시: 피격 이펙트 (Hit VFX) - 적/벽 위치에서 재생
        

## 6. 레퍼런스 (선택)

- **엔터 더 건전 (Enter the Gungeon):** 마우스 방향으로 즉각적인 발사 및 탄 퍼짐 메커니즘.
    
- **탑뷰 슈터 장르 일반:** 클릭 좌표를 월드 좌표로 변환(Raycast)하여 투사체 각도를 계산하는 방식.
    

## 7. 우선순위 (선택)

- [x] 🔴 최우선 (전투 핵심 로직: 입력 -> 회전 -> 발사 -> 판정)
    
- [ ] 🟡 중요 (사운드, 이펙트, 데미지 공식 적용)
    
- [ ] 🟢 나중에 (특수 무기 탄 퍼짐, 벽 관통 무기 등)