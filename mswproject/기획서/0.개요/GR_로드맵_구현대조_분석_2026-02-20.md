# Project GR 로드맵 구현 대조 분석 (2026-02-20)

## 1) 분석 범위

- 기준 문서: `기획서/0.개요/GR_로드맵_및_체크리스트.md`
- 코드 범위: `RootDesk/MyDesk/ProjectGR/Components/*.mlua`
- Maker 데이터 범위:
  - `map/games.map`
  - `ui/DefaultGroup.ui`
  - `Data/SpawnConfig.csv`, `Data/MonsterData.csv`, `Data/ShopItemData.csv`

---

## 2) 한 줄 결론

- **Phase 0~3의 핵심 플레이 루프 코드는 대부분 구현되어 있으나, Maker 배치(몬스터 컨테이너)와 보상 루프(드랍/골드 획득)는 아직 미완성이라 로드맵의 일부 “완료” 항목은 실플레이 기준으로 부분완료 상태다.**

---

## 3) 로드맵 표기 vs 실제 구현 요약

### 3-1. 로드맵 노드 집계(문서 표기 기준)

- 총 노드: 36
- `🟢 완료` 표기: 22
- `❌ 미작성` 표기: 12
- 기타(비코드/상태 미정): 2

### 3-2. SPEC 파일 존재/상태 기준

- 완료 SPEC(실파일 + 상태 `🟢`): 16개
- 미작성 SPEC(로드맵에 필요 명시): 8개
  - `SPEC_WeaponGrowth`
  - `SPEC_CharacterGrowth`
  - `SPEC_DropSystem`
  - `SPEC_StageProgression`
  - `SPEC_BossEncounter`
  - `SPEC_GameResult`
  - `SPEC_ReplayLoop`
  - `SPEC_CrystalSystem`

---

## 4) 코드 대조 결과

## 4-1. Phase 0~3 핵심 컴포넌트는 구현됨

- Bootstrap 자동 부착 목록에 핵심 컴포넌트 포함 확인
  - `RootDesk/MyDesk/ProjectGR/Components/Bootstrap/Map01BootstrapComponent.mlua:121`
  - `RootDesk/MyDesk/ProjectGR/Components/Bootstrap/Map01BootstrapComponent.mlua:128`
- 전투/이동/태그/상점/타이머/랭킹 컴포넌트 파일 모두 존재
  - `RootDesk/MyDesk/ProjectGR/Components/Combat/*.mlua`
  - `RootDesk/MyDesk/ProjectGR/Components/Meta/*.mlua`
  - `RootDesk/MyDesk/ProjectGR/Components/UI/*.mlua`

## 4-2. MonsterSpawn는 코드상 구현됐지만, 현재 맵 배치 없으면 동작 정지

- `MonsterContainer`가 없으면 스폰 비활성화하도록 안전 설계되어 있음
  - `RootDesk/MyDesk/ProjectGR/Components/Combat/MonsterSpawnComponent.mlua:14`
  - `RootDesk/MyDesk/ProjectGR/Components/Combat/MonsterSpawnComponent.mlua:295`

## 4-3. 드랍/보상 루프는 메타 저장까지만 구현

- 드랍 관련 컬럼은 메타로만 저장하고 실제 지급 로직은 없음
  - `RootDesk/MyDesk/ProjectGR/Components/Combat/MonsterSpawnComponent.mlua:713`
  - `RootDesk/MyDesk/ProjectGR/Components/Combat/MonsterSpawnComponent.mlua:727`
- 로드맵의 “드랍 아이템 미작성” 판단은 코드와 일치

## 4-4. 골드 경제는 소비 루프는 구현, 획득 루프는 미연결

- `GoldComponent`에는 `AddGold` API가 있으나 호출 지점이 없음
  - `RootDesk/MyDesk/ProjectGR/Components/Core/GoldComponent.mlua:39`
- 즉, 로드맵 22번 노드 설명(몬스터 드랍→골드 획득)은 현재 코드 기준으로 과표기 가능성 있음

## 4-5. 상점은 로직은 유연하나 맵 엔티티는 현재 1개만 확인

- ShopManager는 1~4 슬롯의 희소 배치를 허용하는 방어 로직 보유
  - `RootDesk/MyDesk/ProjectGR/Components/Meta/ShopManagerComponent.mlua:301`
  - `RootDesk/MyDesk/ProjectGR/Components/Meta/ShopManagerComponent.mlua:350`
- 맵에는 `Shop_East`만 확인됨(서/남/북 미확인)

---

## 5) Maker 데이터 대조 결과

## 5-1. map/games.map

- 확인 엔티티:
  - `/maps/games/LobbyBootstrap` (`script.Map01BootstrapComponent`)
  - `/maps/games/GRProjectileTemplate`
  - `/maps/games/Shop_East`
- 미확인 엔티티:
  - `/maps/games/MonsterContainer`
  - `/maps/games/Shop_West`, `/maps/games/Shop_South`, `/maps/games/Shop_North`

## 5-2. ui/DefaultGroup.ui

- 로비/랭킹/HUD/무기휠/상점 UI 경로 대부분 존재 확인
  - `GRStartButton`, `GRRankingText`, `GRMyRankText`
  - `GRHPText`, `GRAmmoText`, `GRCooldownText`, `GRWeaponText`
  - `GRWeaponWheelRoot`, `ShopPanel`, `ShopDimOverlay`, `Slot1~3`

## 5-3. Data CSV

- `SpawnConfig.csv` 존재(1행 데이터)
- `MonsterData.csv` 존재(30행 데이터)
- `ShopItemData.csv` 존재(3행 데이터)
- 세 파일 모두 UTF-8 BOM 상태로 관리 가능

---

## 6) 갭 분석(우선순위)

1. **P1: 몬스터 스폰 실동작 갭**
- 증상: `MonsterContainer` 미배치 시 스폰 시스템 정지
- 영향: 로드맵 10/28번 노드 실플레이 검증 불가

2. **P1: 보상 루프 단절(드랍/골드 획득)**
- 증상: 드랍/골드는 메타만 존재, 지급/획득 파이프라인 미구현
- 영향: 로드맵 22/23/24번의 경제 루프 완성도 저하

3. **P2: 상점 엔티티 편중**
- 증상: 현재 맵 기준 Shop_East만 존재
- 영향: 순환형 상점 연출/랜덤성 체감 약화(기능은 방어적으로 동작 가능)

4. **P2: 로드맵 문서 최신화 포인트**
- 문서 하단 `최종 업데이트: 2026-02-19` 표기는 최신 구현(2/20 반영)과 시차가 있음

---

## 7) 권장 액션(단기)

1. `games.map`에 `MonsterContainer` 엔티티 추가 후 스폰 실플레이 확인
2. `SPEC_DropSystem` 초안 작성 후 `MonsterSpawn -> Gold/Item 지급` 연결
3. 골드 획득 경로(예: 처치 시 `GoldComponent:AddGold`)를 명시적으로 구현
4. 상점 엔티티를 2~4개로 확장하거나, 단일 상점 운영 정책을 로드맵에 명확히 기재
5. 로드맵 문서의 `최종 업데이트` 및 노드 22 설명을 현재 코드 상태 기준으로 교정

---

## 8) 종합 판정

- **개발 단계 판정:** Phase 0~3는 “코드 구현 완료에 근접”
- **실서비스 준비 판정:** “부분완료”
- **부족한 핵심:** 보상/성장/스테이지/결과 루프(Phase 4~6) + 일부 Maker 배치 정합

